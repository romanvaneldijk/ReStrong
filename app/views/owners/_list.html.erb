<div id="accordion">
  <% @tables.each do |table| %>
    <div>
      <div class="card-header" id="heading<%= table.id %>">
        <h5 class="mb-0">
          <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse<%= table.id %>" aria-expanded="false" aria-controls="collapse<%= table.id %>">
            Table <%= table.table_number %> -- Status: <%= table.dinners.status  %>
          </button>
        </h5>
      </div>
      <div id="collapse<%= table.id %>" class="collapse open-card" aria-labelledby="heading<%= table.id %>" data-parent="#accordion">
        <div class="card-body">
          <% table.orders.each do |order| %>
            <div class="row" style="margin-top: 20px; margin-bottom: 5px;"> Order <%= order.id %></div>
            <% order.items.tally.each do |item, count| %>
              <div class="row">
                <div class="col-8 pl-0 border-bottom border-white" style="margin-bottom: 10px;">-<%= item.name %></div>
                <div class="col-2 pl-0 border-bottom border-white" style="margin-bottom: 10px;"><%= count %>x</div>
                <div class="col-2 pl-0 border-bottom border-white" style="margin-bottom: 10px;">€<%= item.price %></div>
              </div>
            <% end %>
          <% end %>

          <div class="row border-bottom border-dark total-sum">
            <% prices = table.orders.map(&:items).flatten.map(&:price) %>
            Total: €<%= prices.sum %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
